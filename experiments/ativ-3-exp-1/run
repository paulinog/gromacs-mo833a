#!/usr/bin/env bash 
# @file     run
# @author	Guilherme Paulino <ra117119 @students.ic.unicamp.br>

echo "Hi there! I'm now in $PWD"
DIR_ATIV3="${0%/*}"

# Download input files
if [[ ! -d ${DIR_ATIV3}/data ]]; then
  echo "call download.sh";
  source ${DIR_ATIV3}/download.sh
else
  echo "Fine, download files already there...";
fi

# Compile in Release mode
if [[ ! -d build/Release ]]; then
  echo "call build.sh Release";
  source ${DIR_ATIV3}/build.sh Release
else
  echo "No worries, build/Release already exists...";
fi
source ${DIR_ATIV3}/process_gmx.sh Release

# Compile in Debug mode
if [[ ! -d build/Debug ]]; then
  echo "call build.sh Debug";
  source ${DIR_ATIV3}/build.sh Debug
else
  echo "Okay, build/Debug already exists too...";
fi 
source ${DIR_ATIV3}/process_gmx.sh Debug

# Run simulation in Release mode and measure time
# time -p ${DIR_ATIV3}/simulate_gmx.sh Release

# Run simulation in Debug mode and measure time
# time -p ${DIR_ATIV3}/simulate_gmx.sh Debug
